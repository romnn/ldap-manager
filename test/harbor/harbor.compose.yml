version: "3"
services:
  core:
    image: goharbor/harbor-core:${HARBOR_VERSION}
    depends_on:
      - postgresql
      - redis
    # docker.io/bitnami/harbor-core:2
    # container_name: harbor-core

  # registry:
  #   image: goharbor/registry-photon:${HARBOR_VERSION}
  #   restart: always
  #   volumes:
  #     #   - ./data/registry:/storage
  #     - ./harbor.yml:/etc/registry/config.yml
  #     # - /etc/core/ca/ca.crt:/etc/registry/root.crt
  #   ports:
  #     - 5000:5000
  #   command:
  #     - serve
  #     - /etc/registry/config.yml

  postgresql:
    image: goharbor/harbor-db:${HARBOR_VERSION}
    restart: always
    # volumes:
    #   - ./data/database:/var/lib/postgresql/data:z
    # env_file:
    #   - ./common/config/db/env
    ports:
      - 5432:5432

  redis:
    image: goharbor/redis-photon:${HARBOR_VERSION}
    restart: always
    # volumes:
    #   - ./data/redis:/var/lib/redis
    ports:
      - 6379:6379
